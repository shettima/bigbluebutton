<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
       xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
       xmlns:lang="http://www.springframework.org/schema/lang"
       xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-2.0.xsd
                           http://www.springframework.org/schema/lang http://www.springframework.org/schema/lang/spring-lang-2.0.xsd">

  	<bean id="multipartResolver" class="org.springframework.web.multipart.commons.CommonsMultipartResolver"/>

    <bean id="urlMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
        <property name="mappings">
            <value>
                upload.form=fileUploadController
            </value>
        </property>
    </bean>

    <bean id="fileUploadController" class="org.bigbluebutton.deskshare.servlet.FileUploadController">
        <property name="commandClass" value="org.bigbluebutton.deskshare.servlet.FileUploadBean"/>
        <property name="formView" value="fileuploadform"/>
        <property name="successView" value="confirmation"/>
    </bean>

<!-- HandlerMapping that dispatches all request to the MultiActionController below -->
	<bean id="handlerMapping" class="org.springframework.web.servlet.handler.SimpleUrlHandlerMapping">
		<property name="defaultHandler" ref="imageController"/>
	</bean>

	<!-- MultiActionController that defines user interface actions as separate methods -->
	<bean id="imageController" class="org.bigbluebutton.deskshare.servlet.FileUploadController2">
		<property name="methodNameResolver">
			<bean class="org.springframework.web.servlet.mvc.multiaction.PropertiesMethodNameResolver">
				<property name="mappings">
					<props>
						<prop key="/showslides">displaySlides</prop>
					</props>
				</property>
			</bean>
		</property>
	</bean>
</beans>