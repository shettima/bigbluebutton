<?xml version="1.0" encoding="utf-8"?>
<EventMap xmlns:mx="http://www.adobe.com/2006/mxml" xmlns="http://mate.asfusion.com/" xmlns:mate="org.bigbluebutton.common.mate.*">
	<mx:Script>
		<![CDATA[
			import org.bigbluebutton.common.mate.SharedObjectService;
			import org.blindside.modules.autotest.events.SOTestEvent;
			import org.blindside.modules.autotest.business.TestRequestListener;
			import org.blindside.modules.autotest.events.LoginTestEvent;
			import mx.events.FlexEvent;
			
			public static const SO_TEST:String = "soTest";
			
			private var testListener:TestRequestListener = new TestRequestListener();
			[Bindable] private var soService:SharedObjectService;
			public var connection:NetConnection;
			
			private function setLoginFlag():void{
				testListener.loginSuccess = true;
				soService = new SharedObjectService(connection.uri, connection);
				dispatchEvent(new SOTestEvent());
			}
			
			private function setSOFlag():void{
				testListener.sharedObjectSuccess = true;
			}
		]]>
	</mx:Script>
	
	<EventHandlers type="{LoginTestEvent.LOGIN_TEST}">
		<InlineInvoker method="setLoginFlag" />
	</EventHandlers>
	
	<EventHandlers type="{SOTestEvent.TEST_SHARED_OBJECT_CONNECTION}">
		<mate:SharedObjectInvoker SOName="testSO" sharedObjectService="{soService}">
			<Properties message="{SO_TEST}" />
		</mate:SharedObjectInvoker>
	</EventHandlers>
	
	<Listener type="{SO_TEST}" method="setSOFlag" />
</EventMap>
